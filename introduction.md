# 前言

ZStack发布以来，已经得到越来越多的开源云计算爱好者的关注，不少公司和开发者也开始基于ZStack做二次开发。本文档详细介绍了ZStack的技术实现细节，为开发者提供第一手的ZStack开发资料. 

虽然该文档是以ZStack的设计与实现为主题的，但其覆盖的大型程序设计的方方面面会引出非常多有意思的话题，例如“什么样的架构能够承担百万级代码？”、“如何在一个全异步的程序中实现exception safe？”、“进程内微服务架构是个什么鬼？”、“在Java中，为什么使用interface的funcional style编程比使用lambda更灵活？” ... 诸如此类。这都是我们在开发ZStack的过程中通过不断实践总结下来的经验，也能被一般大型程序所借鉴。

# 围绕metadata而生

几年前在跟Darren Shepherd（前同事，现容器初创企业Rancher CTO）有一次聊天，他提到IaaS管控软件（例如你们熟悉的OpenStack，CloudStack，还有ZStack）的本质是metadata管理软件，我们所做的一切，不过是尽力维护数据中心各种物理设备和虚拟设备的状态与中心数据库的一致。虽然该观点不一定是Darren首创，但他确实非常准确的指出了编排软件的本质。无论媒体或从业者把云描述的如何神奇，冠以各种高大上的词汇，例如“数据中心操作系统”、“云OS”，在程序员眼中，编排软件（无论是IaaS还是容器）无非是大型的配置管理程序，它根据用户的指令配置数据中心的虚拟、物理资源，将它们的状态设置到合适的状态，并尽力在数据库中维护这些状态的一致性。

>你已经注意到我多次用到了“尽力”二字。是的，在一个大型分布式系统中维护状态的一致性是非常难的，在后面的章节中，你们将看到ZStack为此所做的努力。







